"use strict";(self.webpackChunkforward_portal=self.webpackChunkforward_portal||[]).push([[214],{86531:(e,a,l)=>{l.r(a),l.d(a,{default:()=>G});var t=l(72791),n=l(80383),r=l(13967),o=l(697),s=l(20890),i=l(49877),c=l(20068),d=l(64370),u=l(93543),m=l(94070),p=l(41578),h=l(39336),x=l(38639),g=l(10918),b=l(79748),y=l(57621),C=l(9585),j=l(13400),v=l(39504),Z=l(61889),_=l(94721),f=l(36314),S=l(9955),T=l(72363),P=l(94294),E=l(16856),w=l(35527),k=l(66934),D=l(39203),F=(l(38151),l(63911)),H=l(52638),A=l(80184);const R=(0,k.ZP)(w.Z)((e=>{let{theme:a}=e;return{...a.typography.body2,boxShadow:"none",textAlign:"start",color:a.palette.text.secondary,flexGrow:1}})),V=(0,k.ZP)(w.Z)((e=>{let{theme:a}=e;return{...a.typography.body2,boxShadow:"none",textAlign:"end",color:a.palette.text.primary,flexGrow:1}})),z=e=>{const{initialValue:a={},handleFormData:l,onHandleClose:n,clickedBtn:i,errorMessage:c,setErrorMessage:d,company_id:u}=e,m=(0,r.Z)(),p=(0,g.TV)(m.palette.mode),[h,x]=(0,t.useState)({value:a?a.name:"",error:!1,success:!1}),[b,w]=(0,t.useState)([]),[k,z]=(0,t.useState)({value:a?a.company_id:"",error:!1,success:!1}),[L,N]=(0,t.useState)({value:a?a.description:"",error:!1,success:!1}),[M,I]=(0,t.useState)([{label:"Number",value:"Number"},{label:"SIP",value:"SIP"}]),[q,B]=(0,t.useState)({value:a?null===a||void 0===a?void 0:a.type:"Number",error:!1,success:!1}),[G,K]=(0,t.useState)({value:a?a.forwarding_number:"",error:!1,success:!1}),[O,U]=(0,t.useState)({value:a?null===a||void 0===a?void 0:a.connection_timeout:null,error:!1,success:!1}),[J,X]=(0,t.useState)("edit"===i&&null!==a.monthly_cap),[Q,W]=(0,t.useState)({value:a?a.monthly_cap:"",error:!1,success:!1}),[Y,$]=(0,t.useState)("edit"===i&&null!==a.daily_cap),[ee,ae]=(0,t.useState)({value:a?a.daily_cap:"",error:!1,success:!1}),[le,te]=(0,t.useState)("edit"===i&&null!==a.hourly_cap),[ne,re]=(0,t.useState)({value:a?a.hourly_cap:"",error:!1,success:!1}),[oe,se]=(0,t.useState)("edit"===i&&null!==a.max_concurrency),[ie,ce]=(0,t.useState)({value:a?a.max_concurrency:"",error:!1,success:!1});(0,t.useEffect)((()=>{(0,F.rn)().then((e=>{var a,l,t;const n=null===(a=e.data)||void 0===a||null===(l=a.data)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.map((e=>({value:e.id,label:e.company_name})));w(n)})).catch((e=>{console.log(e)}))}),[]);return(0,A.jsxs)(y.Z,{sx:{boxShadow:"none",backgroundColor:p.form[500],color:p.form[100]},children:[(0,A.jsx)(C.Z,{action:(0,A.jsx)(j.Z,{"aria-label":"settings",onClick:n,children:(0,A.jsx)(E.FU5,{color:p.form[100]})}),title:"add"===i?"Add Target":"Update Target"}),(0,A.jsx)(v.Z,{color:p.form[100],children:(0,A.jsxs)(o.Z,{component:"form",sx:{"& .MuiTextField-root":{mb:1},"&::-webkit-scrollbar":{width:"6px",borderRadius:"3px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"gray",borderRadius:"3px"},"&::-webkit-scrollbar-track":{backgroundColor:"lightgray",borderRadius:"3px"}},className:"formResponsiveHeight",noValidate:!0,children:[c&&(0,A.jsx)("span",{className:"error_msg",children:c}),(0,A.jsxs)(Z.ZP,{container:!0,spacing:1,children:["0"===u&&(0,A.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,A.jsx)(H.Z,{Value:k.value,onSelect:e=>{d(""),z(e)},label:"Company *",CustomErrorLine:"Choose one",Required:!0,Options:b})}),(0,A.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,A.jsx)(D.Z,{type:"alpha",placeholder:"Enter Target Name",label:"Name",Value:h.value,onChangeText:e=>{d(""),x(e)},Required:!0,CustomErrorLine:"Enter proper name"})}),(0,A.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,A.jsx)(D.Z,{type:"textarea",placeholder:"Enter Description",label:"Description",Value:L.value,onChangeText:e=>{d(""),N(e)},Required:!1,CustomErrorLine:"Enter proper description"})}),(0,A.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,A.jsx)(H.Z,{Value:q.value,onSelect:e=>{d(""),B(e)},label:"Did Type *",CustomErrorLine:"Choose one",Required:!0,Options:M})}),(0,A.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,A.jsx)(D.Z,{type:"Number"===q.value?"phoneno":"textarea",placeholder:"Number"===q.value?"Enter Number":"Enter Sip",label:"Number"===q.value?"Number":"Sip",Value:G.value,onChangeText:e=>{d(""),K(e)},Required:!0,CustomErrorLine:"Number"===q.value?"Enter proper number":"Enter proper sip"})}),(0,A.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,A.jsx)(D.Z,{type:"num",placeholder:"Enter connection time out",label:"Connection timeout",Value:O.value,onChangeText:e=>{d(""),U(e)},Required:!1,CustomErrorLine:"Enter proper description"})}),(0,A.jsxs)(Z.ZP,{item:!0,xs:12,md:12,mb:1,children:[(0,A.jsx)(s.Z,{children:"Cap Setting"}),(0,A.jsx)(_.Z,{})]}),(0,A.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,A.jsxs)(f.Z,{direction:"row",justifyContent:"space-between",alignItems:"baseline",children:[(0,A.jsx)(R,{children:"Monthly Cap"}),(0,A.jsx)(V,{children:(0,A.jsx)(S.Z,{checked:J,onChange:()=>X(!J),name:"inputToggle",color:"secondary"})}),(0,A.jsx)("span",{style:{width:"40%"},children:(0,A.jsx)(D.Z,{type:"capvalue",placeholder:"Enter cap",label:"Monthly Cap",Value:Q.value,onChangeText:e=>{d(""),W(e)},Required:!0,CustomErrorLine:"Enter proper cap value",isHidden:!J})})]})}),(0,A.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,A.jsxs)(f.Z,{direction:"row",justifyContent:"space-between",alignItems:"baseline",children:[(0,A.jsx)(R,{children:"Daily cap"}),(0,A.jsx)(V,{children:(0,A.jsx)(S.Z,{checked:Y,onChange:()=>$(!Y),name:"inputToggle",color:"secondary"})}),(0,A.jsx)("span",{style:{width:"40%"},children:(0,A.jsx)(D.Z,{type:"capvalue",placeholder:"Enter cap",label:"Daily Cap",Value:ee.value,onChangeText:e=>{d(""),ae(e)},Required:!0,CustomErrorLine:"Enter proper cap value",isHidden:!Y})})]})}),(0,A.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,A.jsxs)(f.Z,{direction:"row",justifyContent:"space-between",alignItems:"baseline",children:[(0,A.jsx)(R,{children:"Hourly cap"}),(0,A.jsx)(V,{children:(0,A.jsx)(S.Z,{checked:le,onChange:()=>te(!le),name:"inputToggle",color:"secondary"})}),(0,A.jsx)("span",{style:{width:"40%"},children:(0,A.jsx)(D.Z,{type:"capvalue",placeholder:"Enter cap",label:"Hourly Cap",Value:ne.value,onChangeText:e=>{d(""),re(e)},Required:!0,CustomErrorLine:"Enter proper cap value",isHidden:!le})})]})}),(0,A.jsx)(Z.ZP,{item:!0,xs:12,md:6,children:(0,A.jsxs)(f.Z,{direction:"row",justifyContent:"space-between",alignItems:"baseline",children:[(0,A.jsx)(R,{children:"Maximum Concurrency"}),(0,A.jsx)(V,{children:(0,A.jsx)(S.Z,{checked:oe,onChange:()=>se(!oe),name:"inputToggle",color:"secondary"})}),(0,A.jsx)("span",{style:{width:"40%"},children:(0,A.jsx)(D.Z,{type:"capvalue",placeholder:"Enter cap",label:"Maximum Concurrency",Value:ie.value,onChangeText:e=>{d(""),ce(e)},Required:!0,CustomErrorLine:"Enter proper cap value",isHidden:!oe})})]})})]})]})}),(0,A.jsxs)(T.Z,{sx:{justifyContent:"space-between",mr:1,ml:1},children:[(0,A.jsx)(P.Z,{size:"small",variant:"contained",onClick:n,children:"Cancel"}),(0,A.jsx)(P.Z,{type:"submit",size:"small",onClick:e=>(e=>{e.preventDefault();const a={name:h.value,description:L.value,forwarding_number:G.value,connection_timeout:O.value,type:q.value,monthly_cap:!0===J?Q.value:null,daily_cap:!0===Y?ee.value:null,hourly_cap:!0===le?ne.value:null,max_concurrency:!0===oe?ie.value:null,company_id:"0"===u?parseInt(k.value):parseInt(u)};l(a)})(e),sx:{backgroundColor:p.greenAccent[500]},variant:"contained",children:"add"===i?"Save":"Update"})]})]})};var L=l(12581);var N=l(73598),M=l(52891),I=l(51973);const q=[{name:"Dashboard",path:"",icon:(0,A.jsx)(p.MXJ,{})},{name:"Targets",icon:(0,A.jsx)(p.TKm,{})}],B=t.forwardRef((function(e,a){return(0,A.jsx)(m.Z,{elevation:6,ref:a,variant:"filled",...e})})),G=()=>{const e=(0,r.Z)(),a=(0,g.TV)(e.palette.mode),l=JSON.parse(localStorage.getItem("user")).user_data.company_id,[m,p]=(0,t.useState)([]),[y,C]=(0,t.useState)(!1),[j,v]=(0,t.useState)(!1),[Z,_]=(0,t.useState)(""),[f,S]=(0,t.useState)(),[T,P]=(0,t.useState)(),[E,w]=(0,t.useState)(""),[k,D]=(0,t.useState)(0),[F,H]=(0,t.useState)(1),[R,V]=(0,t.useState)(10),[G,K]=(0,t.useState)({open:!1,vertical:"top",horizontal:"right"}),[O,U]=(0,t.useState)(""),{vertical:J,horizontal:X,open:Q}=G,W=(0,t.useMemo)((()=>[{accessorKey:"name",header:"Name",enableColumnDragging:!1,enableGlobalFilter:!0,enableColumnFilter:!1,enableColumnActions:!1,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"left"},size:100},{accessorKey:"target_random_id",header:"Random ID",enableColumnDragging:!1,enableGlobalFilter:!0,enableColumnFilter:!1,enableColumnActions:!1,muiTableBodyCellProps:{align:"left"},muiTableHeadCellProps:{align:"left"},size:50},{accessorKey:"hourly_cap",header:"Hour",enableColumnDragging:!1,enableGlobalFilter:!0,enableColumnFilter:!1,enableColumnActions:!1,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"left"},size:30},{accessorKey:"daily_cap",header:"Day",enableColumnDragging:!1,enableGlobalFilter:!0,enableColumnFilter:!1,enableColumnActions:!1,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"left"},size:30},{accessorKey:"monthly_cap",header:"Month",enableColumnDragging:!1,enableGlobalFilter:!0,enableColumnFilter:!1,enableColumnActions:!1,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"left"},size:30},{accessorKey:"connection_timeout",header:"Timeout",enableColumnDragging:!1,enableGlobalFilter:!0,enableColumnFilter:!1,enableColumnActions:!1,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"left"},size:30},{accessorKey:"status",header:"Status",enableColumnDragging:!1,enableGlobalFilter:!1,enableColumnFilter:!1,enableColumnActions:!1,Cell:e=>{let{cell:a}=e;return(0,A.jsx)(x.Z,{value:a.getValue()})},muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"left"},size:30}]),[]),Y=(e,a)=>{"clickaway"!==a&&K({...G,open:!1})},$=(e,a)=>{var l,t;C(!0),(l=e,t=a,(0,L.o)({method:"GET",url:"/target?page=".concat(l,"&perpage=").concat(t)})).then((e=>{var a;let l=0===e.data.data.length?[]:e.data.data.data;D(0===e.data.data.length?0:null===(a=e.data.data)||void 0===a?void 0:a.total),p(l),C(!1)})).catch((()=>{C(!1)}))};(0,t.useEffect)((()=>{$(F,R)}),[F,R]);const ee=()=>{P(""),v(!1)},ae=e=>{var a;C(!0),(a=e,(0,L.o)({method:"POST",url:"/target",data:a})).then((e=>{$(F,R),C(!1),P(""),w(e.data.message),U("success"),K({...G,open:!0}),v(!1)})).catch((e=>{C(!1),P(e.message)}))},le=e=>{C(!0);const a={data:{user_id:f.user_id,company_id:e.company_id,name:e.name,type:e.type,description:e.description,forwarding_number:e.forwarding_number,connection_timeout:e.connection_timeout,monthly_cap:e.monthly_cap,daily_cap:e.daily_cap,hourly_cap:e.hourly_cap,max_concurrency:e.max_concurrency,status:f.status},id:f.id};var l;(l=a,(0,L.o)({method:"PUT",url:"/target/".concat(l.id),data:l.data})).then((e=>{$(F,R),C(!1),P(""),U("success"),w(e.data.message),K({...G,open:!0}),v(!1)})).catch((e=>{C(!1),P(e.message)}))};return(0,A.jsxs)(A.Fragment,{children:[y&&(0,A.jsx)(N.Z,{}),(0,A.jsx)(u.Z,{open:Q,anchorOrigin:{vertical:J,horizontal:X},autoHideDuration:3e3,onClose:Y,children:(0,A.jsx)(B,{onClose:Y,severity:O,sx:{width:"100%"},children:E})}),(0,A.jsxs)(o.Z,{sx:{"& .rs-pagination-group":{color:a.layoutColor[200]},"& .MuiTypography-root":{color:a.layoutColor[200]},mt:1,ml:2,mr:2,mb:2,height:"80%",backgroundColor:"inherit"},children:[(0,A.jsx)(h.Z,{pathList:q}),(0,A.jsxs)(o.Z,{children:[(0,A.jsx)(b.u,{modal_width:"50%",isOpen:j,children:(0,A.jsx)(z,{company_id:l,handleFormData:"add"===Z?ae:le,onHandleClose:ee,clickedBtn:Z,initialValue:"edit"===Z?f:{},errorMessage:T,setErrorMessage:P})}),(0,A.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,A.jsx)("div",{children:(0,A.jsx)(s.Z,{variant:"h5",children:"Manage Targets"})}),(0,A.jsx)("div",{style:{zIndex:1},children:(0,A.jsx)(i.Z,{"aria-label":"add",size:"small",sx:{boxShadow:"none",backgroundColor:a.greenAccent[500]},onClick:()=>{var e;P(""),v(!0),e="add",P(""),_(e)},children:(0,A.jsx)(c.Z,{title:"Add",children:(0,A.jsx)(d.Z,{})})})})]}),(0,A.jsxs)(o.Z,{children:[(0,A.jsx)(M.Z,{isLoading:y,data:m,column:W,handleEditAction:e=>{_("edit"),S(e),v(!0)},handleDeleteAction:e=>{C(!0);(e=>(0,L.o)({method:"DELETE",url:"/target/delete/".concat(e.id),data:{is_delete:e.is_delete}}))({id:e.id,is_delete:null===e.deleted_at?1:0}).then((e=>{$(F,R),U("success"),w(e.data.message),K({...G,open:!0}),P(""),v(!1),C(!1)})).catch((e=>{C(!1)}))},handlePlayPause:e=>{C(!0);(e=>(0,L.o)({method:"PATCH",url:"/target/changeStatus/".concat(e.id),data:{status:e.status}}))({id:e.id,status:1===e.status?0:1}).then((e=>{$(F,R),U("success"),w(e.data.message),K({...G,open:!0}),P(""),v(!1),C(!1)})).catch((e=>{U("error"),w(e.message),K({...G,open:!0}),P(""),v(!1),C(!1)}))},isSearchable:!0,isEditable:!0,isDeletable:!0,isStatusChangable:!1,isPlayPause:!0}),(0,A.jsx)(n.Z,{style:{marginTop:5},layout:["total","-","pager","skip"],size:"xs",prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,total:k,limit:R,maxButtons:5,activePage:F,onChangePage:H,limitOptions:[5,10,25,50,100],onChangeLimit:V})]})]})]}),(0,A.jsx)(I.Z,{})]})}},38151:()=>{}}]);
//# sourceMappingURL=214.86e8da19.chunk.js.map